"""slackwebapi.

This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
"""

# ruff: noqa: D410, E501, E101, D206
from apimatic_core.authentication.multiple.single_auth import (
    Single,
)
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter

from slackwebapi.api_helper import APIHelper
from slackwebapi.configuration import Server
from slackwebapi.controllers.base_controller import (
    BaseController,
)
from slackwebapi.exceptions.default_error_template_exception import (
    DefaultErrorTemplateException,
)
from slackwebapi.http.http_method_enum import (
    HttpMethodEnum,
)
from slackwebapi.models.default_success_template import (
    DefaultSuccessTemplate,
)


class WorkflowsController(BaseController):
    """A Controller to access Endpoints in the slackwebapi API."""

    def __init__(self, config):
        """Initialize WorkflowsController object."""
        super(WorkflowsController, self).__init__(config)

    def workflows_step_completed(self,
                                 token,
                                 workflow_step_execute_id,
                                 outputs=None):
        """Perform a GET request to /workflows.stepCompleted.

        Indicate that an app's step in a workflow completed execution.

        Args:
            token (str): Authentication token. Requires scope:
                `workflow.steps:execute`
            workflow_step_execute_id (str): Context identifier that maps to the
                correct workflow step execution.
            outputs (str, optional): Key-value object of outputs from your step. Keys
                of this object reflect the configured `key` properties of your
                [`outputs`](/reference/workflows/workflow_step#output) array from
                your `workflow_step` object.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Typical success response

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/workflows.stepCompleted")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("token")
                .value(token)
                .is_required(True))
            .query_param(Parameter()
                .key("workflow_step_execute_id")
                .value(workflow_step_execute_id)
                .is_required(True))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/x-www-form-urlencoded"))
            .query_param(Parameter()
                .key("outputs")
                .value(outputs))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("slackAuth")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(DefaultSuccessTemplate.from_dictionary)
            .is_api_response(True)
            .local_error("default",
                "Typical error response",
                DefaultErrorTemplateException),
        ).execute()

    def workflows_step_failed(self,
                              token,
                              workflow_step_execute_id,
                              error):
        """Perform a GET request to /workflows.stepFailed.

        Indicate that an app's step in a workflow failed to execute.

        Args:
            token (str): Authentication token. Requires scope:
                `workflow.steps:execute`
            workflow_step_execute_id (str): Context identifier that maps to the
                correct workflow step execution.
            error (str): A JSON-based object with a `message` property that should
                contain a human readable error message.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Typical success response

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/workflows.stepFailed")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("token")
                .value(token)
                .is_required(True))
            .query_param(Parameter()
                .key("workflow_step_execute_id")
                .value(workflow_step_execute_id)
                .is_required(True))
            .query_param(Parameter()
                .key("error")
                .value(error)
                .is_required(True))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/x-www-form-urlencoded"))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("slackAuth")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(DefaultSuccessTemplate.from_dictionary)
            .is_api_response(True)
            .local_error("default",
                "Typical error response",
                DefaultErrorTemplateException),
        ).execute()

    def workflows_update_step(self,
                              token,
                              workflow_step_edit_id,
                              inputs=None,
                              outputs=None,
                              step_name=None,
                              step_image_url=None):
        """Perform a GET request to /workflows.updateStep.

        Update the configuration for a workflow extension step.

        Args:
            token (str): Authentication token. Requires scope:
                `workflow.steps:execute`
            workflow_step_edit_id (str): A context identifier provided with
                `view_submission` payloads used to call back to
                `workflows.updateStep`.
            inputs (str, optional): A JSON key-value map of inputs required from a
                user during configuration. This is the data your app expects to
                receive when the workflow step starts. **Please note**: the embedded
                variable format is set and replaced by the workflow system. You
                cannot create custom variables that will be replaced at runtime.
                [Read more about variables in workflow steps
                here](/workflows/steps#variables).
            outputs (str, optional): An JSON array of output objects used during step
                execution. This is the data your app agrees to provide when your
                workflow step was executed.
            step_name (str, optional): An optional field that can be used to override
                the step name that is shown in the Workflow Builder.
            step_image_url (str, optional): An optional field that can be used to
                override app image that is shown in the Workflow Builder.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Typical success response

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/workflows.updateStep")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("token")
                .value(token)
                .is_required(True))
            .query_param(Parameter()
                .key("workflow_step_edit_id")
                .value(workflow_step_edit_id)
                .is_required(True))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/x-www-form-urlencoded"))
            .query_param(Parameter()
                .key("inputs")
                .value(inputs))
            .query_param(Parameter()
                .key("outputs")
                .value(outputs))
            .query_param(Parameter()
                .key("step_name")
                .value(step_name))
            .query_param(Parameter()
                .key("step_image_url")
                .value(step_image_url))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("slackAuth")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(DefaultSuccessTemplate.from_dictionary)
            .is_api_response(True)
            .local_error("default",
                "Typical error response",
                DefaultErrorTemplateException),
        ).execute()
